<div class="nav-superior shadow rounded my-auto">
    <ol class="nav-superior__breadcrumb m-0 breadcrumb">        
        <li class="breadcrumb-item"><a href="/dashboard">TABLERO</a></li>
        <li class="breadcrumb-item active" aria-current="page">Hist√≥ricos de dispositivos</li>
    </ol>
</div>
<div class="contenido-principal px-3">
   
    <form class="p-4 bg-light rounded">
        <div class="row">
            <div class="col">
                <label for="exampleFormControlSelect1">Seleccionar Dispositivo</label>
                <select class="form-control" id="exampleFormControlSelect1">
                    <option selected>Temperatura</option>
                   
                </select>
            </div>
            <div class="col">
                <label for="datetimepicker1">Desde: </label>
                <div class="input-group date" id="datetimepicker1" data-target-input="nearest">
                    <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker1" id="desde"/>
                    <div class="input-group-append" data-target="#datetimepicker1" data-toggle="datetimepicker">
                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>
            </div>
            <div class="col">
                <label for="datetimepicker2">Hasta: </label>
                <div class="input-group date" id="datetimepicker2" data-target-input="nearest">
                    <input type="text" class="form-control datetimepicker-input" data-target="#datetimepicker2" id="hasta"/>
                    <div class="input-group-append" data-target="#datetimepicker2" data-toggle="datetimepicker">
                        <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                    </div>
                </div>
            </div>
            <div class="col-2">
                <label for="consulta_historico" style="visibility:hidden">Label for button</label>
                <button type="button" class="btn btn-primary d-block" id="consulta_historico" onclick="query_data()">Enviar consulta</button>
            </div>
            
        </div>
    </form>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
          var data = new google.visualization.DataTable();
          data.addColumn('datetime', 'X');
          data.addColumn('number', 'Temperatura');
          var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
        /*var data = google.visualization.arrayToDataTable([
          ['tiempo', 'dispositivo'],
          [new Date("25/02/2021 12:18:20"),  12.1],
          [new Date("25/02/2021 12:18:21"),  23.2],
          [new Date("25/02/2021 12:18:22"),  11.2],
          [new Date("25/02/2021 12:18:23"),  34.5],
          [new Date("25/02/2021 12:18:24"),  12.1],
          [new Date("25/02/2021 12:18:25"),  23.2],
          [new Date("25/02/2021 12:18:26"),  11.2],
          [new Date("25/02/2021 12:18:27"),  34.5],
          [new Date("25/02/2021 12:18:28"),  12.1],
          [new Date("25/02/2021 12:18:29"),  23.2],
          [new Date("25/02/2021 12:18:30"),  11.2],
          [new Date("25/02/2021 12:18:31"),  34.5],
        ]);*/
      

        var options = {
          title: '',
          hAxis: {title: 'tiempo',  titleTextStyle: {color: '#333'}},
          vAxis: {
            minValue: 0,
            scaleType: 'log'
          }
        };

        //var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
        let ejemplo = [
        [new Date("10/02/2021 12:18:20"),  12.1],
          [new Date("10/02/2021 12:18:21"),  23.2],
          [new Date("10/02/2021 12:18:22"),  11.2],
          [new Date("10/02/2021 12:18:23"),  34.5],
          [new Date("10/02/2021 12:18:24"),  12.1],
          [new Date("10/02/2021 12:18:25"),  23.2],
          [new Date("10/02/2021 12:18:26"),  11.2],
          [new Date("10/02/2021 12:18:27"),  34.5],
          [new Date("10/02/2021 12:18:28"),  12.1],
          [new Date("10/02/2021 12:18:29"),  23.2],
          [new Date("10/02/2021 12:18:30"),  11.2],
          [new Date("10/02/2021 12:18:31"),  34.5],
          [new Date("11/02/2021 12:18:20"),  12.1],
          [new Date("11/02/2021 12:18:21"),  23.2],
          [new Date("11/02/2021 12:18:22"),  11.2],
          [new Date("11/02/2021 12:18:23"),  34.5],
          [new Date("11/02/2021 12:18:24"),  12.1],
          [new Date("11/02/2021 12:18:25"),  23.2],
          [new Date("11/02/2021 12:18:26"),  11.2],
          [new Date("11/02/2021 12:18:27"),  34.5],
          [new Date("11/02/2021 12:18:28"),  12.1],
          [new Date("11/02/2021 12:18:29"),  23.2],
          [new Date("11/02/2021 12:18:30"),  11.2],
          [new Date("11/02/2021 12:18:31"),  34.5],];
        data.addRows(ejemplo);
        chart.draw(data, options);
      }
    </script>
    <div id="chart_div" class="mt-3 bg-light rounded" style="width: 100%; height: 400px;"></div>
</div>
<script type="text/javascript">
            let dateCurr = new Date();
            $(function () {
                $('#datetimepicker1').datetimepicker({
                    format: 'YYYY-MM-DD',
                    maxDate: dateCurr,
                });
            });
            $(function () {
                $('#datetimepicker2').datetimepicker({
                    format: 'YYYY-MM-DD',
                    maxDate: dateCurr,
                });
            });


            function query_data(){
                let fecha_desde = document.getElementById('desde').value;
                let fecha_hasta = document.getElementById('hasta').value;

                console.log(fecha_desde, fecha_hasta);

                axios(
                    { 
                        method: 'POST', 
                        url: '{{url}}/api/search_devices', 
                        headers: {
                            Authorization: "Bearer Token"
                        }, 
                        data: { 
                            id: 10 
                        }
                    }
    ).then((res) => {
        
        console.log(res.data);

    }).catch((err) => {
        
        console.log(err);
    });
            };
</script>