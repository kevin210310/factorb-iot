<div class="container-fluid m-0 p-0 h-auto" style="overflow-x: hidden;">
    <div class="row mt-3 mx-0 mx-md-3 bg-body shadow-sm">
        <div class="col-12 rounded py-auto">
            <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
                <ol class="breadcrumb my-3">
                    <li class="breadcrumb-item"><a href="/dashboard">INICIO</a></li>
                    <li class="breadcrumb-item"><a href="/dashboard/maquinas">MAQUINAS</a></li>
                    <li class="breadcrumb-item active" aria-current="page">AGREGAR NUEVO DISPOSITIVO</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row mt-3 mx-0 mx-md-3 px-5 d-flex justify-content-center">
        <div class="col-6">
            <div class="card">
                <div class="card-body">
                    <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link  btn-lg" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">1. Datos generales</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link btn-lg" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">2. Localización</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active btn-lg" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false">3. Agregar sensores</button>
                        </li>
                    </ul>
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                            <div class="container border bg-light">
                                <div class="row py-5">
                                    <div class="col-12 mb-3">
                                        <img id="blah" src="\images\machines\machine-image.svg" class="img-thumbnail rounded mx-auto d-block" alt="Tu imagen" width="200px" height="200px">
                                       
                                    </div>
                                    <div class="col-12">
                                        <div class="mb-3">
                                        
                                            <input class="form-control" type="file" id="formFile1">
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control" id="floatingInput2" placeholder="name@example.com">
                                            <label for="floatingInput">Nombre</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating mb-3">
                                            <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea"></textarea>
                                            <label for="floatingTextarea">Descripción</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating mb-3">
                                            <select class="form-select" id="floatingSelect" aria-label="Floating label select example">
                                                <option value="0" selected>Seleccionar usuario</option>
                                                <option value="1">Usuario 1</option>
                                                <option value="2">Usuario 2</option>
                                                <option value="3">Usuario 3</option>
                                            </select>
                                            <label for="floatingSelect">Asociar al usuario:</label>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            <div class="container px-0">
                                <div class="row mx-0 mt-3">
                                    <div class="col-12 d-flex justify-content-end">
                                        <div class="btn-group" role="group" aria-label="Basic example">
                                            <button type="button" class="btn btn-secondary" disabled>atras</button>
                                            <button type="button" class="btn btn-primary">siguiente</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            


                        </div>
                        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <div class="container border bg-light">
                                <div class="row py-5">
                                    <div class="col-12">
                                        <div id="map2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade show active" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                            <div class="container border bg-light">
                                <div class="row py-5" id="sensores_creados">
                                    <div class="col-12">
                                        <p class="text-center fs-5">
                                            Si deseas crear un sensor para este dispositivo, haz click aquí.
                                        </p>
                                    </div>
                                    <div class="col-12 d-flex justify-content-center">
                                        <button class="btn btn-primary text-center" onclick="crear_sensor()">
                                            Crear Sensor
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    function crear_sensor(){
        let camposSensores = document.getElementById('sensores_creados');


        camposSensores.innerHTML = `
            <div class="col-12">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="floatingInput5" placeholder="name@example.com">
                    <label for="floatingInput">Nombre sensor</label>
                </div>
            </div>
            <div class="col-12">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="floatingInput6" placeholder="name@example.com">
                    <label for="floatingInput">Identificador de la variable</label>
                </div>
            </div>
            <div class="col-12">
                <div class="form-floating mb-3">
                    <select class="form-select" aria-label="Floating label select example" id="select-1" onchange="cambio_sensor()">
                        <option value="0" selected>Seleccionar variable</option>
                        <option value="1">Entrada Analoga</option>
                        <option value="2">Entrada Digital</option>
                        <option value="3">Salida Digital</option>
                    </select>
                    <label for="floatingSelect">Tipo de variable</label>
                </div>
            </div>
            <div class="col-12">
                <div class="row" id="variable">
                    
                </div>
            </div>`;

    }


    function cambio_sensor(){
    // Código a ejecutar cuando se detecta un cambio de archivO
        let valor = document.getElementById('select-1').value;
        let formulario_variable;

        if(valor == 0){
            document.getElementById('variable').innerHTML = ``;
        }
        else {
            
            //ENTRADA ANALOGA
            if(valor == 1){

                formulario_variable = `
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="floatingInput9" placeholder="name@example.com">
                            <label for="floatingInput">Variable de medición</label>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control" id="floatingInput9" placeholder="name@example.com">
                            <label for="floatingInput">Medición minima</label>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control" id="floatingInput9" placeholder="name@example.com">
                            <label for="floatingInput">Medición maxima</label>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <label for="exampleColorInput" class="form-label">Color de diseño</label>
                        <input type="color" class="form-control form-control-color" id="exampleColorInput" value="#563d7c" title="Choose your color">
                    </div>
                    <div class="col-6 mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                            <label class="form-check-label" for="flexCheckDefault">
                                ¿Controlable?
                            </label>
                        </div>
                    </div>
                    
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="floatingInput9" placeholder="name@example.com">
                            <label for="floatingInput">Variable de medición</label>
                        </div>
                    </div>`;
                
            } 
            
            //ENTRADA DIGITAL        
            else if(valor == 2) {
                
                formulario_variable = `
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="floatingInput9" placeholder="name@example.com">
                            <label for="floatingInput">Variable de medición</label>
                        </div>
                    </div>`;

            } 
            
            //SALIDA DIGITAL
            else if(valor == 3) {

                formulario_variable = `
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="floatingInput9" placeholder="name@example.com">
                            <label for="floatingInput">Variable de medición</label>
                        </div>
                    </div>`;

            }
            document.getElementById('variable').innerHTML = formulario_variable;
        }
        
    };

    function readImage (input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) {
          $('#blah').attr('src', e.target.result); // Renderizamos la imagen
      }
      reader.readAsDataURL(input.files[0]);
    }
  }

  $("#formFile1").change(function () {
    // Código a ejecutar cuando se detecta un cambio de archivO
    readImage(this);
  });
  
  
</script>